---
import { Icon } from "astro-icon/components";
import Link from "../ui/Link.astro";

// Define types
type Heading = {
  depth: number;
  slug: string;
  text: string;
};

interface HeadingProps {
  headings: Heading[];
}

const { headings } = Astro.props as HeadingProps;
const hasToC = headings.length > 1;
---

<div class="flex flex-col gap-4 overflow-y-scroll py-4 pl-4 pr-[12px]">
  {
    hasToC && (
      <div class="flex flex-col gap-2">
        <div class="flex flex-row px-4 gap-2 items-center">
          <Icon name="github" />
          <p class="text-text-primary font-medium mt-0!">On this Page</p>
        </div>
        <div class="flex flex-col gap-1 ">
          {headings.map(
            (heading: { depth: unknown; slug: unknown; text: unknown }) => {
              const classNameLink =
                heading.depth === 2
                  ? "text-text-primary! bg-background-surface!"
                  : "text-text-secondary! hover:text-accent-primary! hover:bg-transparent!";
              return (
                <Link
                  href={`#${heading.slug}`}
                  class={`h-6! ${classNameLink}`}
                  key={heading.slug}
                >
                  {heading.text}
                </Link>
              );
            }
          )}
        </div>
      </div>
    )
  }
</div>
